# Strove AI 写作助手 MVP 产品需求文档

## 一、产品定位
**轻量级AI写作辅助工具**，让用户使用自己的AI大模型密钥，快速获取写作灵感、润色文案、编辑文档。

### 核心理念
- **极简部署**：用户只需配置API密钥即可使用
- **聚焦写作**：专注于基础写作辅助，不做复杂功能堆砌
- **轻量体验**：快速响应，流畅交互，无学习负担

---

## 二、核心功能需求

### 2.1 用户密钥管理
**功能描述**  
用户在设置页面配置自己的AI大模型API密钥（支持OpenAI、通义千问、文心一言等主流服务商），系统将密钥加密存储在本地浏览器localStorage中，仅在调用AI接口时使用。

**核心交互**
1. 用户进入"设置"页面
2. 选择AI服务商（下拉选择：OpenAI / 通义千问 / 文心一言）
3. 输入API密钥
4. 点击"保存"，系统验证密钥有效性
5. 密钥保存成功后，用户可使用AI功能

**约束条件**
- 密钥仅存储在用户本地浏览器，不上传服务器
- 支持密钥的修改和删除
- 未配置密钥时，AI功能入口显示"请先配置密钥"提示

---

### 2.2 AI对话写作辅助功能

**功能描述**  
用户在对话界面输入写作需求（如"写一篇工作总结提纲"、"润色这段文案"），系统调用AI大模型接口返回对应的写作内容、建议或基础润色结果；保留对话记录展示，支持单条记录删除。AI返回的内容可以选择整体重写或勾选特定句子要求润色。

**核心交互流程**
1. 用户在对话框输入写作需求
2. 点击"发送"，系统显示loading状态
3. AI返回内容展示在对话区域
4. 用户可以：
   - 点击"复制"按钮复制AI回复
   - 点击"重写"按钮对整段内容重新生成
   - 勾选特定句子，点击"润色选中内容"
   - 点击"删除"按钮删除该条对话记录

**输入示例**
- "帮我写一篇关于团队建设的工作总结提纲"
- "润色这段文案：我们公司是一家专业的软件开发企业"
- "扩写这句话：春天来了"

**约束条件**
- 仅实现基础文本交互，不做深度改写、专业领域定制化优化等复杂处理
- 对话记录仅在当前会话保存，刷新页面后清空（可选：使用localStorage临时保存）
- 单次AI请求超时时间设为30秒

**数据结构**
```typescript
interface Message {
  id: string
  role: 'user' | 'assistant'
  content: string
  timestamp: number
}
```

---

### 2.3 基础文档编辑功能

**功能描述**  
支持用户创建新文档，以Markdown格式进行文本编辑（含字体加粗、斜体、列表、代码块等基础格式）；实现文档本地临时保存，关闭页面后再次打开可恢复编辑内容。

**核心交互**
1. 用户点击"新建文档"或进入"文档编辑器"
2. 在编辑器中输入Markdown格式的文本
3. 编辑器提供实时预览（左侧编辑，右侧预览）
4. 系统自动保存内容到localStorage
5. 用户关闭页面后再次打开，自动恢复上次编辑内容

**支持的Markdown语法**
- 标题（# ## ###）
- 加粗（**文字**）
- 斜体（*文字*）
- 列表（- 或 1.）
- 代码块（```）
- 引用（>）
- 链接和图片

**约束条件**
- **砍掉多文档管理、版本追溯**
- **仅支持单文档编辑与本地临时存储**
- 不提供云端同步功能
- 编辑器使用轻量级Markdown编辑器组件（如Toast UI Editor或Markdown-it）

**数据结构**
```typescript
interface Document {
  content: string
  lastModified: number
}
```

---

### 2.4 极简灵感生成功能

**功能描述**  
提供单独的灵感输入入口，用户输入关键词（如"春日游记"），AI返回3-5条核心写作思路/方向。

**核心交互**
1. 用户在"灵感生成"页面输入关键词
2. 点击"生成灵感"
3. AI返回3-5条简短的写作思路（每条20-50字）
4. 用户可点击某条灵感，将其复制到剪贴板或发送到对话框

**输入输出示例**
- 输入："春日游记"
- 输出：
  ```
  1. 从清晨的第一缕阳光写起，描绘春日的宁静美好
  2. 以樱花盛开为线索，串联起一路的惊喜和感动
  3. 讲述与朋友踏青的趣事，展现春天的活力
  4. 对比城市与自然的春天，表达回归自然的渴望
  5. 用细腻的笔触描写春天的色彩、声音和气味
  ```

**约束条件**
- **不做复杂写作框架生成**
- **仅输出极简的灵感要点**（3-5条）
- 每条思路控制在50字以内
- 不提供进一步的扩展功能

---

### 2.5 通用提示词模板功能

**功能描述**  
内置3-5个通用写作场景模板（工作总结、学生短文、职场邮件等），用户点击模板可快速填充至对话输入框，简化需求输入流程。

**内置模板清单**
1. **工作总结**  
   "请帮我写一篇[时间段]的工作总结，主要内容包括：[完成的任务]、[遇到的挑战]、[未来计划]"

2. **学生短文**  
   "请帮我写一篇关于[主题]的短文，字数控制在[500]字左右，文风[真诚/活泼/严肃]"

3. **职场邮件**  
   "请帮我撰写一封[类型：感谢/请假/汇报]邮件，收件人是[职位]，主要内容是[具体事项]"

4. **读后感**  
   "请帮我写一篇关于《[书名]》的读后感，重点分析[角色/主题/写作手法]"

5. **润色文案**  
   "请帮我润色以下文案，使其更加[专业/生动/简洁]：[原文]"

**核心交互**
1. 用户在对话界面点击"模板"按钮
2. 弹出模板选择面板
3. 用户点击某个模板
4. 模板内容自动填充到输入框（带有[占位符]提示用户填写）
5. 用户修改占位符内容后发送

**约束条件**
- **仅保留固定内置模板，不支持用户自定义**
- 模板数量控制在3-5个
- 模板内容简洁明了，易于理解

---

## 三、页面结构设计

### 3.1 页面导航
```
登录/注册页
    ↓
主界面（Dashboard）
    ├─ AI对话（默认页）
    ├─ 文档编辑器
    ├─ 灵感生成
    └─ 设置（密钥配置）
```

### 3.2 主要页面说明

#### 1. 登录/注册页
- 简洁的表单设计
- 邮箱 + 密码登录
- 注册仅需邮箱、用户名、密码

#### 2. AI对话页（核心页面）
- 左侧：对话历史（可滚动）
- 中间：当前对话区域
- 右侧：快捷功能
  - 模板按钮
  - 清空对话
- 底部：输入框 + 发送按钮

#### 3. 文档编辑器
- 左右分栏：左侧Markdown编辑，右侧实时预览
- 顶部工具栏：基础Markdown格式按钮
- 自动保存提示

#### 4. 灵感生成页
- 顶部：关键词输入框
- 中间：生成的灵感卡片（3-5个）
- 每个卡片有"复制"和"使用"按钮

#### 5. 设置页
- AI服务商选择
- API密钥输入
- 保存/验证按钮
- 使用说明链接

---

## 四、技术实现要求

### 4.1 前端技术栈
- **框架**: Vue 3 + TypeScript
- **UI组件**: Element Plus
- **Markdown编辑器**: Toast UI Editor 或 Markdown-it
- **状态管理**: Pinia
- **路由**: Vue Router
- **HTTP客户端**: Axios

### 4.2 后端技术栈
- **框架**: Spring Boot 3.5
- **数据库**: MySQL 8+（存储用户基本信息）
- **认证**: Spring Security + JWT
- **AI接口调用**: RestTemplate / WebClient

### 4.3 核心数据模型

#### User（用户）
```sql
CREATE TABLE users (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL,
  password VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

**注**: API密钥存储在用户浏览器localStorage中，不存储在数据库

#### 对话记录（可选，如需云端保存）
```sql
CREATE TABLE conversations (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL,
  message TEXT NOT NULL,
  response TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

---

## 五、AI接口集成方案

### 5.1 支持的AI服务商
1. **OpenAI**（GPT-3.5/GPT-4）
2. **阿里云通义千问**
3. **百度文心一言**

### 5.2 接口调用流程
1. 前端从localStorage读取用户配置的密钥
2. 前端发送请求到后端（携带用户消息）
3. 后端接收请求，使用用户密钥调用AI服务商API
4. 后端返回AI响应给前端
5. 前端展示AI回复

### 5.3 安全考虑
- 密钥仅在HTTPS环境传输
- 后端不持久化存储用户密钥
- 使用请求加密防止中间人攻击

---

## 六、MVP开发优先级

### P0（必须实现）
1. ✅ 用户注册/登录
2. ✅ 密钥管理（配置、保存、验证）
3. ✅ AI对话基础功能（发送消息、接收回复）
4. ✅ 文档编辑器（Markdown编辑 + 本地保存）

### P1（重要功能）
1. 对话记录管理（删除单条）
2. AI回复润色功能（整体重写、选中润色）
3. 灵感生成功能
4. 提示词模板功能

### P2（优化功能）
1. 对话历史云端保存（可选）
2. 多AI模型切换
3. 导出文档（Markdown/PDF）

---

## 七、非功能性需求

### 7.1 性能要求
- AI接口响应时间：< 10秒（取决于AI服务商）
- 页面加载时间：< 2秒
- 文档自动保存延迟：输入停止后500ms保存

### 7.2 兼容性
- 现代浏览器（Chrome、Firefox、Safari、Edge）最新2个版本
- 响应式设计，支持桌面和平板设备

### 7.3 安全性
- 所有密码使用BCrypt加密
- JWT Token有效期24小时
- HTTPS传输
- XSS和CSRF防护

---

## 八、开发里程碑

### Sprint 1（Week 1-2）
- 完成用户认证模块
- 完成密钥管理页面
- 搭建AI对话基础框架

### Sprint 2（Week 3-4）
- 完成AI对话核心功能
- 集成至少1个AI服务商API
- 完成文档编辑器

### Sprint 3（Week 5-6）
- 实现灵感生成功能
- 实现提示词模板功能
- 优化UI/UX

### Sprint 4（Week 7-8）
- 完善功能细节
- 性能优化
- 测试与Bug修复

---

## 九、后续扩展方向（非MVP）

1. 多文档管理（云端存储）
2. 团队协作写作
3. 更多AI模型支持
4. 写作统计分析
5. 浏览器插件版本

---

**文档版本**: v2.0（简化MVP版）  
**更新日期**: 2025-12-25  
**核心原则**: 极简、实用、聚焦写作辅助
