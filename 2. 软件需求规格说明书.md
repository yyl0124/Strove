# 软件需求规格说明书

**项目名称**：Strove AI 写作助手 MVP

**版本**：1.0.0

**编写日期**：2025-12-25

---

## 0. 文档介绍

### 0.1 文档目的
本文件用于明确 Strove AI 写作助手 MVP 项目的软件需求，提供给开发、测试、运维等相关方统一的需求基准，确保项目交付符合预期功能和质量目标。

### 0.2 文档范围
本文档覆盖系统的功能性需求、非功能性需求、接口定义、运行环境、约束条件以及需求追踪矩阵等内容。

### 0.3 读者对象
- 项目经理、产品负责人
- 开发团队（前端、后端）
- 测试团队
- 运维与安全审计人员

### 0.4 参考文档
| 编号 | 标题 | 版本 | 日期 |
|------|------|------|------|
| SRS-Template | 软件需求规格说明书模板 | 2.0 | 2021-02-22 |
| README | 项目概述 | 1.0 | 2025-12-01 |
| API-Doc | 后端接口文档 | 1.0 | 2025-12-20 |

### 0.5 术语与缩写
| 术语 | 解释 |
|------|------|
| AI | 人工智能（Artificial Intelligence） |
| API | 应用程序接口 |
| JWT | JSON Web Token |
| UI | 用户界面 |
| MDL | Markdown 文档 |

---

## 1. 项目概述

### 1.1 产品介绍
Strove AI 写作助手是一款面向个人与小团队的轻量级 AI 写作辅助工具，用户通过配置自己的大模型 API 密钥即可获得写作灵感、文本润色、文档编辑等功能。系统采用前端 Vue3 + TypeScript、后端 Spring Boot + Spring AI 实现，支持多家 AI 服务商（OpenAI、通义千问、文心一言、Deepseek、Kimi 等）。

### 1.2 产品范围
- **核心功能**：
  1. 用户注册/登录（基于 JWT）
  2. API 密钥管理（本地加密存储）
  3. AI 对话交互（文本生成、润色）
  4. Markdown 文档编辑（实时预览、自动保存）
  5. 写作灵感生成（关键词 → 3‑5 条思路）
  6. 通用提示词模板（预置 5 种写作场景）
- **不在本次 MVP 范围**：
  - 多文档管理、云端同步
  - 团队协作、版本控制
  - 高级模型微调

### 1.3 用户群体及角色
| 角色 | 描述 |
|------|------|
| 普通用户 | 使用浏览器访问系统，配置个人 API 密钥，进行写作辅助。
| 管理员 | 维护系统配置、监控服务健康（仅内部使用）。

### 1.4 运行环境
- **前端**：Chrome/Edge/Firefox 最新 2 版，支持 ES2022，运行在 https://strove.example.com
- **后端**：Java 21，Spring Boot 3.5，部署在 Linux Docker 容器（CPU 2 核，内存 4GB）
- **数据库**：MySQL 8.0（存储用户基本信息）
- **外部服务**：OpenAI、阿里云通义千问、百度文心一言等 OpenAI 兼容 API

### 1.5 假设、依赖与约束
- 用户自行获取并维护 AI 服务商的 API 密钥，系统不存储密钥。
- 系统仅在 HTTPS 环境下运行，所有外部调用均使用 TLS。
- 前端依赖 Node.js 18+、Vite 5，后端依赖 Maven 3.9+。
- 受限于免费模型配额，单次请求超时上限 30 秒。

---

## 2. 功能性需求

### 2.1 整体业务流程图
>（此处应插入系统用例图或业务流程图，略）

### 2.2 功能分类
| 功能类别 | 子功能 |
|----------|--------|
| **用户管理** | 注册、登录、JWT 鉴权、退出 |
| **密钥管理** | 添加/修改/删除 API 密钥、密钥验证 |
| **AI 对话** | 发送消息、获取回复、删除对话记录、整体重写、选中句子润色 |
| **文档编辑** | 新建 Markdown 文档、实时预览、自动保存、恢复编辑内容 |
| **灵感生成** | 关键词输入、生成 3‑5 条写作思路、复制/使用 |
| **提示词模板** | 预置 5 种模板、快速填充、占位符编辑 |

### 2.3 详细功能描述
#### 2.3.1 用户注册/登录
- **前置条件**：用户访问登录页。
- **输入**：邮箱、用户名、密码。
- **操作**：提交表单 → 后端校验 → 返回 JWT。
- **输出**：登录成功后跳转至 Dashboard，前端保存 JWT 于 localStorage。
- **非功能要求**：响应时间 < 1 秒，密码使用 BCrypt 加密存储。

#### 2.3.2 API 密钥管理（设置页）
- **输入**：选择服务商（下拉），输入 API Key。
- **操作**：点击“保存”，前端调用 `/api/ai/validateKey` 验证密钥有效性。
- **输出**：验证成功后本地加密保存（AES），界面显示“已配置”。
- **约束**：密钥仅本地存储，不上传服务器。

#### 2.3.3 AI 对话
- **输入**：用户在对话框输入文本。
- **操作**：前端调用 `/api/ai/chat`，后端使用 Spring AI 动态创建 ChatModel（基于用户密钥），发送请求并返回结果。
- **输出**：AI 回复显示在对话区，支持复制、整体重写、选中句子润色。
- **性能**：单次请求超时 30 秒，成功率 ≥ 95%。

#### 2.3.4 文档编辑
- **输入**：Markdown 文本。
- **操作**：实时渲染预览，编辑内容每次停止输入 500ms 自动保存至 localStorage。
- **输出**：页面刷新后恢复上次编辑内容。
- **质量**：编辑器使用 Toast UI Editor，支持常用 Markdown 语法。

#### 2.3.5 灵感生成
- **输入**：关键词。
- **操作**：调用 `/api/ai/inspiration`，后端返回 3‑5 条简短思路。
- **输出**：以卡片形式展示，可复制或直接填入对话框。

#### 2.3.6 提示词模板
- **输入**：点击模板按钮选择预置模板。
- **操作**：模板内容自动填充至对话输入框，包含占位符供用户编辑。
- **输出**：用户完成占位符填写后发送。

---

## 3. 非功能性需求

### 3.1 用户界面需求
- 采用响应式布局，支持桌面（宽 ≥ 1024px）和平板（宽 ≥ 768px）。
- 采用 Google Font **Inter**，配色采用深色模式为主，提供明暗切换。
- 所有交互元素（按钮、输入框）提供 hover、focus 动效，符合现代 UI/UX 标准。

### 3.2 性能需求
- 前端首屏加载时间 < 2 秒（资源压缩、懒加载）。
- 后端 API 响应时间 < 1.5 秒（除 AI 调用外），AI 调用 ≤ 30 秒。
- 支持并发用户数 100 人，峰值请求每秒 ≤ 30。

### 3.3 质量属性
| 属性 | 目标 |
|------|------|
| 正确性 | 所有业务规则均符合需求说明。
| 健壮性 | 对异常请求返回统一错误结构，日志脱敏。
| 可靠性 | 系统可用性 ≥ 99.5%（月均），自动重启容器。
| 性能 | 如上 3.2 所述。
| 易用性 | 新用户 5 分钟内完成首次使用。
| 安全性 | 密钥本地 AES‑256 加密，所有接口 HTTPS，JWT 有效期 24h，防 CSRF/XSS。
| 可扩展性 | 支持动态添加新的 AI 服务商配置（YAML）。
| 兼容性 | 支持 Chrome、Edge、Firefox、Safari 最新 2 版。
| 可维护性 | 代码遵循 Clean Architecture，单元测试覆盖率 ≥ 80%。

### 3.4 其他需求
- 日志采用统一结构，关键操作（登录、密钥保存、AI 调用）记录审计信息。
- 部署采用 Docker Compose，提供 `docker-compose.yml`，支持一键启动。

---

## 4. 接口定义

### 4.1 前端 → 后端 REST API
| 方法 | 路径 | 描述 | 请求体 | 响应 |
|------|------|------|--------|------|
| POST | `/api/auth/register` | 用户注册 | `{email, username, password}` | `{success, data}` |
| POST | `/api/auth/login` | 登录获取 JWT | `{email, password}` | `{success, token}` |
| POST | `/api/ai/validateKey` | 验证 API Key 有效性 | `{apiKey, baseUrl}` | `{valid:boolean, message}` |
| POST | `/api/ai/chat` | AI 对话 | `ChatRequest`（见下） | `ApiResponse<ChatResponse>` |
| POST | `/api/ai/inspiration` | 生成灵感 | `InspirationRequest` | `ApiResponse<InspirationResponse>` |

#### 4.1.1 数据结构（参考 `src/main/java/com/erokin/strove/dto`）
- **ChatRequest**：`message`, `apiKey`, `baseUrl`, `model?`
- **ChatResponse**：`reply`, `model`, `tokensUsed?`
- **InspirationRequest**：`keyword`, `apiKey`, `baseUrl`
- **InspirationResponse**：`ideas`（string[]）, `keyword`

### 4.2 外部服务接口
- **OpenAI**：`https://api.openai.com/v1/chat/completions`
- **通义千问**：`https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions`
- **文心一言**：`https://api.baidu.com/...`
- **Deepseek**、**Kimi** 等同上，均符合 OpenAI 兼容协议。

---

## 5. 需求追踪矩阵（附录 B）
> 需求编号 → 设计元素 → 测试用例（此处留空，后续填充）

---

## 6. 需求确认（附录 C）
- **评审会议**：2025-12-20，参与者：产品、开发、测试、运维。
- **评审结论**：需求基本合格，需在后续迭代补充详细 UI 原型。
- **签字**：
  - 项目经理：________________ 日期：______
  - 技术负责人：________________ 日期：______

---

*本文档由 Antigravity 自动生成，基于项目实际代码与模板结构。*
