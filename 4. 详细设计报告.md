[Strove AI 开发团队]		详细设计报告
Strove AI 写作助手		1.0.0 | 2025-12-29



<a name="_toc94685087"></a>**详细设计报告**

**【**Strove AI 写作助手】



<table><tr><th colspan="1" rowspan="7"><p>文件状态：</p><p>[√] 草稿</p><p>[  ] 正式发布</p><p>[  ] 正在修改</p></th><th colspan="1" valign="top">文件标识：</th><th colspan="1" valign="top">STROVE-AI-DOC-DD</th></tr>
<tr><td colspan="1" valign="top">当前版本：</td><td colspan="1" valign="top">1.0.0</td></tr>
<tr><td colspan="1" valign="top">作    者：</td><td colspan="1" valign="top">Antigravity</td></tr>
<tr><td colspan="1" valign="top">完成日期：</td><td colspan="1" valign="top">2025-12-29</td></tr>
<tr><td colspan="1" valign="top">批 准 人：</td><td colspan="1" valign="top"></td></tr>
<tr><td colspan="1" valign="top">批准日期：</td><td colspan="1" valign="top"></td></tr>
<tr><td colspan="1" valign="top">签    字：</td><td colspan="1" valign="top"></td></tr>
</table>
【Strove AI 开发团队**】**





3

**变更历史**

|**序号**|**版本**|**变更日期**|**变更内容**|**变更者**|
| :-: | :-: | :-: | :-: | :-: |
|1|1.0.0|2025-12-29|创建文档初稿|Antigravity|
|2|||||
|3|||||
|4|||||
|5|||||
|6|||||
|7|||||
|8|||||
|9|||||
|10|||||
|11|||||
|12|||||




目 录

[*模板使用	*i**](#_toc918)

[**0. 文档介绍	**4****](#_toc10139)

[0.1 文档目的	4](#_toc8924)

[0.2 文档范围	4](#_toc7771)

[0.3 读者对象	5](#_toc14982)

[0.4 参考文献	5](#_toc30399)

[0.5 术语与缩写解释	5](#_toc6616)

[**1. 模块命名规则	**6****](#_toc19316)

[**2. 模块汇总	**6****](#_toc16216)

[2.1 模块汇总表	6](#_toc32050)

[2.2 可复用功能类列表	6](#_toc7173)

[2.3 功能类关系图（组件关系图）	7](#_toc1942)

[**3. 认证授权模块的功能类设计	**7****](#_toc14649)

[3.1 认证授权模块功能设计	7](#_toc8700)

[3.2 认证授权模块界面设计	7](#_toc13337)

[**4. AI服务模块的功能类设计	**8****](#_toc239)

[4.1 AI服务模块功能设计	8](#_toc9309)

[4.2 AI服务模块界面设计	9](#_toc18232)

[**5. 文档管理模块的功能类设计	**9****](#_toc30307)

[5.1 文档管理模块功能设计	9](#_toc30308)

[5.2 文档管理模块界面设计	9](#_toc30309)

# <a name="_toc16478463"></a><a name="_toc16478129"></a><a name="_toc10139"></a><a name="_toc15898327"></a><a name="_toc16478862"></a>**0. 文档介绍**
## <a name="_toc16478863"></a><a name="_toc8924"></a><a name="_toc16478464"></a><a name="_toc15898328"></a><a name="_toc15786742"></a><a name="_toc16478130"></a>**0.1 文档目的**
<a name="_toc15898329"></a><a name="_toc15786743"></a><a name="_toc16478465"></a><a name="_toc16478131"></a><a name="_toc16478864"></a>本文档旨在详细描述 Strove AI 写作助手系统的内部模块设计、类结构设计、接口定义及界面细节。它是系统编码实现的直接依据，用于指导开发人员进行具体的代码编写，同时为测试人员提供详细的功能测试参考。

## <a name="_toc7771"></a>**0.2 文档范围**
<a name="_toc15898330"></a><a name="_toc15786744"></a><a name="_toc16478132"></a><a name="_toc16478466"></a><a name="_toc16478865"></a>本文档涵盖了系统的核心功能模块设计，包括认证授权模块、AI 服务模块、文档管理模块等。内容涉及各模块的类图、方法定义、数据结构算法及界面交互细节。

## <a name="_toc14982"></a>**0.3 读者对象**
<a name="_toc15786745"></a><a name="_toc16478866"></a><a name="_toc16478467"></a><a name="_toc15898331"></a><a name="_toc16478133"></a>
- 软件开发工程师：依据本文档进行代码实现。
- 系统架构师：审核详细设计的合理性。
- 测试工程师：依据本文档编写单元测试和集成测试用例。

## <a name="_toc30399"></a>**0.4 参考文献**
[1] Strove AI 开发团队，软件需求规格说明书，2025-12-25
[2] Strove AI 开发团队，概要设计说明书，2025-12-29
[3] Strove AI 开发团队，数据库设计说明书，2025-12-29

## <a name="_toc16478867"></a><a name="_toc15786746"></a><a name="_toc15898332"></a><a name="_toc16478134"></a><a name="_toc16478468"></a><a name="_toc6616"></a>**0.5 术语与缩写解释**

|**缩写、术语**|**解 释**|
| :-: | :-: |
|DTO|Data Transfer Object，数据传输对象|
|VO|View Object，视图对象|
|DAO|Data Access Object，数据访问对象（本项目使用 Repository）|
|Controller|控制器层，负责接收请求和响应|
|Service|业务逻辑层，处理核心业务|

# <a name="_toc19316"></a>**1. 模块命名规则**
- **Java 类名**：使用 UpperCamelCase 风格，如 `UserController`。
- **方法名/变量名**：使用 lowerCamelCase 风格，如 `getUserById`。
- **常量名**：使用 CONSTANT_CASE 风格，如 `MAX_RETRY_COUNT`。
- **包名**：使用全小写，如 `com.erokin.strove.controller`。
- **Vue 组件**：使用 PascalCase 风格，如 `ChatInterface.vue`。
- **数据库表**：使用 snake_case 风格，如 `user_info`。

# <a name="_toc16216"></a>**2. 模块汇总**
## <a name="_toc32050"></a>**2.1 模块汇总表**

|**认证授权模块**||
| - | :- |
|功能类名称|功能简述|
|*AuthController.java*|*认证控制器，处理登录、注册、Token 刷新请求。*|
|*AuthService.java*|*认证服务接口，定义用户验证、注册等业务逻辑。*|
|*AuthServiceImpl.java*|*认证服务实现类，实现具体的登录校验和注册逻辑。*|
|*JwtTokenProvider.java*|*JWT 工具类，负责生成、解析和验证 Token。*|
|*User.java*|*用户实体类，映射数据库 users 表。*|
|*UserRepository.java*|*用户数据访问接口，继承 JpaRepository。*|
|**AI 服务模块**||
|功能类名称|功能简述|
|*AIController.java*|*AI 控制器，处理对话、润色、灵感生成请求。*|
|*AIService.java*|*AI 服务接口，定义与外部 AI 模型交互的逻辑。*|
|*AIServiceImpl.java*|*AI 服务实现类，调用 Spring AI 或 HTTP Client 请求外部 API。*|
|*ChatRequest.java*|*对话请求 DTO，封装用户消息和配置。*|
|*ChatResponse.java*|*对话响应 DTO，封装 AI 回复内容。*|
|**文档管理模块**||
|功能类名称|功能简述|
|*DocumentController.java*|*文档控制器，处理文档的 CRUD 请求。*|
|*DocumentService.java*|*文档服务接口，定义文档管理业务逻辑。*|
|*DocumentServiceImpl.java*|*文档服务实现类，实现文档的保存、查询、删除。*|
|*Document.java*|*文档实体类，映射数据库 documents 表。*|
|*DocumentRepository.java*|*文档数据访问接口。*|


## <a name="_toc292961195"></a><a name="_toc7173"></a>**2.2 可复用功能类列表**

- *ApiResponse.java*：统一 API 响应格式封装类。
- *GlobalExceptionHandler.java*：全局异常处理类。
- *BaseEntity.java*：基础实体类，包含 id, createdAt, updatedAt 等通用字段。
- *SecurityConfig.java*：Spring Security 安全配置类。


## <a name="_toc292961196"></a><a name="_toc1942"></a>**2.3 功能类关系图（组件关系图）**
*描述各层级之间的调用关系：*

Controller 层 (REST API) --> Service 层 (业务逻辑) --> Repository 层 (数据访问) --> Database

例如：
`AuthController` 接收 HTTP 请求 -> 调用 `AuthService` 处理业务 -> `AuthService` 调用 `UserRepository` 查询/保存数据 -> `UserRepository` 操作 MySQL 数据库。
同时 `AuthService` 使用 `JwtTokenProvider` 生成令牌。

# <a name="_toc14649"></a>**3. 认证授权模块的功能类设计**
## <a name="_toc8700"></a>**3.1 认证授权模块功能设计**

|功能类名称|AuthController.java|
| :-: | - |
|功能描述|处理用户登录和注册的 HTTP 请求|
|接口与属性|<p>1. `public ApiResponse<LoginResponse> login(@RequestBody LoginRequest request)`</p><p>2. `public ApiResponse<UserDto> register(@RequestBody RegisterRequest request)`</p>|
|数据结构与算法|接收 JSON 请求体，校验参数合法性，调用 Service 层方法，封装返回结果。|
|补充说明|路径：`/api/auth`|

|功能类名称|AuthServiceImpl.java|
| :-: | - |
|功能描述|实现用户认证核心逻辑|
|接口与属性|<p>1. `public String login(String email, String password)`</p><p>2. `public User register(RegisterRequest req)`</p>|
|数据结构与算法|<p>login: 根据邮箱查询用户 -> 使用 BCrypt 校验密码 -> 成功则生成 JWT。</p><p>register: 检查邮箱是否已存在 -> 对密码进行 BCrypt 加密 -> 保存用户至数据库。</p>|
|补充说明||

|功能类名称|JwtTokenProvider.java|
| :-: | - |
|功能描述|JWT 令牌生成与验证|
|接口与属性|<p>1. `public String generateToken(Authentication authentication)`</p><p>2. `public boolean validateToken(String token)`</p><p>3. `public String getUserIdFromJWT(String token)`</p>|
|数据结构与算法|使用 HMAC SHA256 算法签名，包含 userId, exp, iat 等 Claims。|
|补充说明||

## <a name="_toc13337"></a>**3.2 认证授权模块界面设计**
   
   **登录界面 (Login.vue)**
   
   用户登录界面包含邮箱输入框、密码输入框、登录按钮及注册链接。
   
   |**页面ID**|Login.vue|**功能**|用户登录||
   | :-: | - | :-: | - | :- |
   |**编号**|**控件**|**控件类型**|**类型名称**|**控件的功能描述**|
   |1|邮箱|Input|输入框|输入注册邮箱|
   |2|密码|Input|密码框|输入登录密码|
   |3|登录|Button|按钮|点击提交登录请求|
   |4|去注册|Link|链接|跳转至注册页面|

   **注册界面 (Register.vue)**
   
   包含用户名、邮箱、密码、确认密码输入框及注册按钮。

   # <a name="_toc239"></a>**4. AI服务模块的功能类设计**
   ## <a name="_toc9309"></a>**4.1 AI服务模块功能设计**

|功能类名称|AIController.java|
| :-: | - |
|功能描述|处理 AI 对话请求|
|接口与属性|`public ApiResponse<ChatResponse> chat(@RequestBody ChatRequest request)`|
|数据结构与算法|验证 API Key 是否存在（前端传递或后端配置），构建 Prompt，调用 Service。|
|补充说明|路径：`/api/ai`|

|功能类名称|AIServiceImpl.java|
| :-: | - |
|功能描述|与外部 LLM API 交互|
|接口与属性|`public ChatResponse generateResponse(ChatRequest request)`|
|数据结构与算法|构建 HTTP 请求（Header 包含 Authorization），发送至 OpenAI/兼容接口，解析返回的 JSON 提取 content。|
|补充说明|支持流式输出（Server-Sent Events）可选实现。|

   ## <a name="_toc18232"></a>**4.2 AI服务模块界面设计**

   **AI 对话界面 (ChatInterface.vue)**
   
   |**页面ID**|ChatInterface.vue|**功能**|智能对话||
   | :-: | - | :-: | - | :- |
   |**编号**|**控件**|**控件类型**|**类型名称**|**控件的功能描述**|
   |1|消息列表|List|列表容器|展示历史对话记录|
   |2|输入框|Textarea|多行文本框|输入用户问题|
   |3|发送|Button|按钮|发送消息|
   |4|模型选择|Select|下拉框|选择使用的 AI 模型|
   |5|清空|Button|按钮|清空当前对话|

# <a name="_toc30307"></a>**5. 文档管理模块的功能类设计**
   ## <a name="_toc30308"></a>**5.1 文档管理模块功能设计**

|功能类名称|DocumentController.java|
| :-: | - |
|功能描述|文档增删改查|
|接口与属性|<p>1. `createDocument`</p><p>2. `getDocument`</p><p>3. `updateDocument`</p><p>4. `deleteDocument`</p>|
|数据结构与算法|RESTful 风格接口，对应 POST, GET, PUT, DELETE 方法。|
|补充说明|路径：`/api/documents`|

|功能类名称|DocumentServiceImpl.java|
| :-: | - |
|功能描述|文档业务逻辑|
|接口与属性|`public Document save(Document doc)`|
|数据结构与算法|保存前更新 `updatedAt` 字段，计算 `wordCount`。|
|补充说明||

   ## <a name="_toc30309"></a>**5.2 文档管理模块界面设计**

   **编辑器界面 (EditorView.vue)**
   
   |**页面ID**|EditorView.vue|**功能**|文档编辑||
   | :-: | - | :-: | - | :- |
   |**编号**|**控件**|**控件类型**|**类型名称**|**控件的功能描述**|
   |1|标题|Input|输入框|编辑文档标题|
   |2|编辑器|Textarea|Markdown编辑器|输入文档内容|
   |3|预览区|Div|HTML容器|实时预览 Markdown 渲染效果|
   |4|保存状态|Label|标签|显示"已保存"或"保存中..."|
